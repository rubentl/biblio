(function(b){var a=1;b.fn.dropShadow=function(d){var c=b.extend({left:4,top:4,blur:2,opacity:0.5,color:"black",swap:false},d);var e=b([]);this.not(".dropShadow").each(function(){var q=b(this);var n=[];var h=(c.blur<=0)?0:c.blur;var g=(h==0)?c.opacity:c.opacity/(h*8);var f=(c.swap)?a:a+1;var p=(c.swap)?a+1:a;var r;if(this.id){r=this.id+"_dropShadow"}else{r="ds"+(1+Math.floor(9999*Math.random()))}b.data(this,"shadowId",r);b.data(this,"shadowOptions",d);q.attr("shadowId",r).css("zIndex",f);if(q.css("position")!="absolute"){q.css({position:"relative",zoom:1})}bgColor=q.css("backgroundColor");if(bgColor=="rgba(0, 0, 0, 0)"){bgColor="transparent"}if(bgColor!="transparent"||q.css("backgroundImage")!="none"||this.nodeName=="SELECT"||this.nodeName=="INPUT"||this.nodeName=="TEXTAREA"){n[0]=b("<div></div>").css("background",c.color)}else{n[0]=q.clone().removeAttr("id").removeAttr("name").removeAttr("shadowId").css("color",c.color)}n[0].addClass("dropShadow").css({height:q.outerHeight(),left:h,opacity:g,position:"absolute",top:h,width:q.outerWidth(),zIndex:p});var k=(8*h)+1;for(o=1;o<k;o++){n[o]=n[0].clone()}var o=1;var m=h;while(m>0){n[o].css({left:m*2,top:0});n[o+1].css({left:m*4,top:m*2});n[o+2].css({left:m*2,top:m*4});n[o+3].css({left:0,top:m*2});n[o+4].css({left:m*3,top:m});n[o+5].css({left:m*3,top:m*3});n[o+6].css({left:m,top:m*3});n[o+7].css({left:m,top:m});o+=8;m--}var l=b("<div></div>").attr("id",r).addClass("dropShadow").css({left:q.position().left+c.left-h,marginTop:q.css("marginTop"),marginRight:q.css("marginRight"),marginBottom:q.css("marginBottom"),marginLeft:q.css("marginLeft"),position:"absolute",top:q.position().top+c.top-h,zIndex:p});for(o=0;o<k;o++){l.append(n[o])}q.after(l);e=e.add(l);b(window).resize(function(){try{l.css({left:q.position().left+c.left-h,top:q.position().top+c.top-h})}catch(i){}});a+=2});return this.pushStack(e)};b.fn.redrawShadow=function(){this.removeShadow();return this.each(function(){var c=b.data(this,"shadowOptions");b(this).dropShadow(c)})};b.fn.removeShadow=function(){return this.each(function(){var c=b(this).shadowId();b("div#"+c).remove()})};b.fn.shadowId=function(){return b.data(this[0],"shadowId")};b(function(){var c="<style type='text/css' media='print'>";c+=".dropShadow{visibility:hidden;}</style>";b("head").append(c)})})(jQuery);